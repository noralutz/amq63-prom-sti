#!/bin/sh

if [ "${SCRIPT_DEBUG}" = "true" ] ; then
    set -x
    echo "Script debugging is enabled, allowing bash commands and their arguments to be printed as they are executed"
fi

PROMCONF=/tmp/src/prometheus_jmx_exporter_configuration
ARTCONF=/tmp/src/artemis_configuration
SRCLIB=/tmp/src/lib

if [ -d ${PROMCONF} ]; then
  echo "Copying artemis config files from project..."
  cp -v ${PROMCONF}/promconfig.yml $AMQ_HOME/etc/
fi

if [ -d ${ARTCONF} ]; then
  echo "Copying artemis config files from project..."
  cp -v ${ARTCONF}/artemis $AMQ_HOME/bin/
fi

if [ -d ${SRCLIB} ]; then
  echo "Copying jars from project..."
  cp -v ${SRCLIB}/* $AMQ_HOME/lib/
fi


# Remove java tmp perf data dir owned by 185
rm -rf /tmp/hsperfdata_jboss

exit 0
